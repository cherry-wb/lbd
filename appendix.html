

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Appendix &mdash; Write An LLVM Backend Tutorial For Cpu0</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '3.2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="top" title="Write An LLVM Backend Tutorial For Cpu0" href="index.html" />
    <link rel="next" title="Todo List" href="todo.html" />
    <link rel="prev" title="ELF" href="elf.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="todo.html" title="Todo List"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="elf.html" title="ELF"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Write An LLVM Backend Tutorial For Cpu0</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="appendix">
<span id="id1"></span><h1>Appendix<a class="headerlink" href="#appendix" title="Permalink to this headline">¶</a></h1>
<div class="section" id="setting-up-your-mac">
<h2>Setting Up Your Mac<a class="headerlink" href="#setting-up-your-mac" title="Permalink to this headline">¶</a></h2>
<div class="section" id="installing-llvm-xcode-and-cmake">
<h3>Installing LLVM, Xcode and cmake<a class="headerlink" href="#installing-llvm-xcode-and-cmake" title="Permalink to this headline">¶</a></h3>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<p class="last">Fix centering for figure captions.</p>
</div>
<p>Please download LLVM version 3.1 (llvm, clang, compiler-rf) from the
<a class="reference external" href="http://llvm.org/releases/download.html#3.1">LLVM Download Page</a>. Then extract them using
<tt class="docutils literal"><span class="pre">tar</span> <span class="pre">-zxvf</span> <span class="pre">{llvm-3.1.src.tar,</span> <span class="pre">clang-3.1.src.tar,</span> <span class="pre">compiler-rt-3.1.src.tar}</span></tt>,
and change the llvm source code root directory into src.
After that, move the clang source code to src/tools/clang, and move the
compiler-rt source to src/project/compiler-rt as shown in <a class="reference internal" href="#install-f1"><em>LLVM, clang, compiler-rt source code positions on Mac OS X</em></a>.</p>
<div class="admonition-todo admonition" id="index-1">
<p class="first admonition-title">Todo</p>
<p class="last">Should we just write out commands in a terminal for people to execute?</p>
</div>
<div class="figure align-center" id="install-f1">
<img alt="_images/1.png" src="_images/1.png" />
<p class="caption">Figure 1: LLVM, clang, compiler-rt source code positions on Mac OS X</p>
</div>
<p>Next, copy the LLVM source to /Users/Jonathan/llvm/3.1/src by executing the
terminal command <tt class="docutils literal"><span class="pre">cp</span> <span class="pre">-rf</span> <span class="pre">/Users/Jonathan/Documents/llvmSrc/src</span> <span class="pre">/Users/Jonathan/</span>
<span class="pre">llvm/3.1/.</span></tt>.</p>
<p>Install Xcode from the Mac App Store. Then install cmake, which can be found
here: <a class="reference external" href="http://www.cmake.org/cmake/resources/software.html">http://www.cmake.org/cmake/resources/software.html</a>.
Before installing cmake, make sure you can install applications you download
from the Internet. Open &#8220;System Preferences&#8221;-&gt;&#8221;Security &amp; Privacy.&#8221; Click the
lock to make changes, and under &#8220;Allow applications downloaded from:&#8221; select
the radio button next to &#8220;Anywhere.&#8221; See <a class="reference internal" href="#install-f2"><em>Adjusting Mac OS X security settings to allow cmake installation.</em></a> below for an
illustration. You may want to revert this setting after installing cmake.</p>
<div class="figure align-center" id="install-f2">
<img alt="_images/2.png" src="_images/2.png" />
<p class="caption">Figure 2: Adjusting Mac OS X security settings to allow cmake installation.</p>
</div>
<p>Alternatively, you can mount the cmake .dmg image file you downloaded, right
-click (or
control-click) the cmake .pkg package file and click &#8220;Open.&#8221; Mac OS X will ask y
ou if you
are sure you want to install this package, and you can click &#8220;Open&#8221; to start the
installer.</p>
</div>
<div class="section" id="create-llvm-xcodeproj-by-cmake-graphic-ui">
<h3>Create LLVM.xcodeproj by cmake Graphic UI<a class="headerlink" href="#create-llvm-xcodeproj-by-cmake-graphic-ui" title="Permalink to this headline">¶</a></h3>
<p>We install llvm source code with clang on directory /Users/Jonathan/llvm/3.1/
in last section.
Now, will generate the LLVM.xcodeproj in this chapter.</p>
<p>Currently, we cannot do debug by lldb with cmake graphic UI operations depicted
in this section, but we can do debug by lldb with <a class="reference external" href="http://jonathan2251.github.com/lbd/install.html#create-llvm-xcodeproj-of-supporting-cpu0-by-terminal-cmake-command">section Create LLVM.xcodeproj
of supporting cpu0 by terminal cmake command</a>.
Even with that, let&#8217;s build LLVM project with cmake graphic UI since this LLVM
directory contains the release version for clang and clang++ execution file.
First, create LLVM.xcodeproj as
<a class="reference internal" href="#install-f3"><em>Start to create LLVM.xcodeproj by cmake</em></a>, then click <strong>configure</strong> button to enter <a class="reference internal" href="#install-f4"><em>Create LLVM.xcodeproj by cmake – Set option to generate Xcode project</em></a>,
and then click <strong>Done</strong> button on <a class="reference internal" href="#install-f4"><em>Create LLVM.xcodeproj by cmake – Set option to generate Xcode project</em></a> to get <a class="reference internal" href="#install-f5"><em>Create LLVM.xcodeproj by cmake – Before Adjust CMAKE_INSTALL_NAME_TOOL</em></a>.</p>
<div class="figure align-center" id="install-f3">
<img alt="_images/3.png" src="_images/3.png" />
<p class="caption">Figure 3: Start to create LLVM.xcodeproj by cmake</p>
</div>
<div class="figure align-center" id="install-f4">
<img alt="_images/4.png" src="_images/4.png" />
<p class="caption">Figure 4: Create LLVM.xcodeproj by cmake – Set option to generate Xcode project</p>
</div>
<div class="figure align-center" id="install-f5">
<img alt="_images/5.png" src="_images/5.png" />
<p class="caption">Figure 5: Create LLVM.xcodeproj by cmake – Before Adjust CMAKE_INSTALL_NAME_TOOL</p>
</div>
<div class="admonition-todo admonition" id="index-2">
<p class="first admonition-title">Todo</p>
<p class="last">The html will follow the appear order in *.rst source context but latexpdf didn&#8217;t. For example, the <a class="reference internal" href="#install-f4"><em>Create LLVM.xcodeproj by cmake – Set option to generate Xcode project</em></a> Figure 2.4 and <a class="reference internal" href="#install-f5"><em>Create LLVM.xcodeproj by cmake – Before Adjust CMAKE_INSTALL_NAME_TOOL</em></a> Figure 2.5 appear after the below text &#8220;Click OK from ...&#8221; in pdf. If find the <strong>NoReorder</strong> or <strong>newpage</strong> directive, maybe can solve this problem.</p>
</div>
<p>Click OK from <a class="reference internal" href="#install-f5"><em>Create LLVM.xcodeproj by cmake – Before Adjust CMAKE_INSTALL_NAME_TOOL</em></a> and select Cmake 2.8-9.app for CMAKE_INSTALL_NAM
E_TOOL by click the right side button <strong>“...”</strong> of that row in
<a class="reference internal" href="#install-f5"><em>Create LLVM.xcodeproj by cmake – Before Adjust CMAKE_INSTALL_NAME_TOOL</em></a> to get <a class="reference internal" href="#install-f6"><em>Select Cmake 2.8-9.app</em></a>.</p>
<div class="figure align-center" id="install-f6">
<img alt="_images/6.png" src="_images/6.png" />
<p class="caption">Figure 6: Select Cmake 2.8-9.app</p>
</div>
<p>Click Configure button in <a class="reference internal" href="#install-f6"><em>Select Cmake 2.8-9.app</em></a> to get <a class="reference internal" href="#install-f7"><em>Click cmake Configure button first time</em></a>.</p>
<div class="figure align-center" id="install-f7">
<img alt="_images/7.png" src="_images/7.png" />
<p class="caption">Figure 7: Click cmake Configure button first time</p>
</div>
<p>Check CLANG_BUILD_EXAMPLES, LLVM_BUILD_EXAMPLES, and uncheck LLVM_ENABLE_PIC as
<a class="reference internal" href="#install-f8"><em>Check CLANG_BUILD_EXAMPLES, LLVM_BUILD_EXAMPLES, and uncheck
LLVM_ENABLE_PIC in cmake</em></a>.</p>
<div class="figure align-center" id="install-f8">
<img alt="_images/8.png" src="_images/8.png" />
<p class="caption">Figure 8: Check CLANG_BUILD_EXAMPLES, LLVM_BUILD_EXAMPLES, and uncheck
LLVM_ENABLE_PIC in cmake</p>
</div>
<p>Click Configure button again. If the output result message has no red color,
then click Generate button to get <a class="reference internal" href="#install-f9"><em>Click cmake Generate button second time</em></a>.</p>
<div class="figure align-center" id="install-f9">
<img alt="_images/9.png" src="_images/9.png" />
<p class="caption">Figure 9: Click cmake Generate button second time</p>
</div>
</div>
<div class="section" id="build-llvm-by-xcode">
<h3>Build llvm by Xcode<a class="headerlink" href="#build-llvm-by-xcode" title="Permalink to this headline">¶</a></h3>
<p>Now, LLVM.xcodeproj is created. Open the cmake_debug_build/LLVM.xcodeproj by
Xcode and click menu “Product – Build” as <a class="reference internal" href="#install-f10"><em>Click Build button to build LLVM.xcodeproj by Xcode</em></a>.</p>
<div class="figure align-center" id="install-f10">
<img alt="_images/10.png" src="_images/10.png" />
<p class="caption">Figure 10: Click Build button to build LLVM.xcodeproj by Xcode</p>
</div>
<p>After few minutes of build, the clang, llc, llvm-as, ..., can be found in
cmake_debug_build/bin/Debug/ as <a class="reference internal" href="#install-f11"><em>Executable files built by Xcode</em></a>.</p>
<div class="figure align-center" id="install-f11">
<img alt="_images/11.png" src="_images/11.png" />
<p class="caption">Figure 11: Executable files built by Xcode</p>
</div>
<p>To access those execution files, edit .profile (if you .profile not exists,
please create file .profile), save .profile to /Users/Jonathan/, and enable
$PATH by command <tt class="docutils literal"><span class="pre">source</span> <span class="pre">.profile</span></tt> as <a class="reference internal" href="#install-f12"><em>Edit .profile and save .profile to /Users/Jonathan/</em></a>.
Please add path /Applications//Xcode.app/Contents/Developer/usr/bin to .profile
if you didn&#8217;t add it after Xcode download.</p>
<div class="figure align-center" id="install-f12">
<a class="reference internal image-reference" href="_images/12.png"><img alt="_images/12.png" src="_images/12.png" style="width: 993.6px; height: 142.2px;" /></a>
<p class="caption">Figure 12: Edit .profile and save .profile to /Users/Jonathan/</p>
</div>
</div>
<div class="section" id="create-llvm-xcodeproj-of-supporting-cpu0-by-terminal-cmake-command">
<h3>Create LLVM.xcodeproj of supporting cpu0 by terminal cmake command<a class="headerlink" href="#create-llvm-xcodeproj-of-supporting-cpu0-by-terminal-cmake-command" title="Permalink to this headline">¶</a></h3>
<p>We have install llvm with clang on directory llvm/3.1/.
Now, we want to install llvm with our cpu0 backend code on directory
llvm/3.1.test/cpu0/1 in this section.</p>
<p>In <a class="reference external" href="http://jonathan2251.github.com/lbd/install.html#create-llvm-xcodeproj-by-cmake-graphic-ui">section Create LLVM.xcodeproj by cmake Graphic UI</a>, we create
LLVM.xcodeproj by cmake graphic UI.
We can create LLVM.xcodeproj by <tt class="docutils literal"><span class="pre">cmake</span></tt> command on terminal also.
Now, let&#8217;s repeat above steps to create llvm/3.1.test with cpu0 modified code
as <a class="reference internal" href="#install-f13"><em>Create llvm/3.1.test with cpu0 modified code</em></a>.</p>
<div class="figure align-center" id="install-f13">
<img alt="_images/13.png" src="_images/13.png" />
<p class="caption">Figure 13: Create llvm/3.1.test with cpu0 modified code</p>
</div>
<p>/Users/Jonathan/Documents/Gamma_flash/LLVMBackendTutorial/src_files_modify/src/
contains the files I modified for cpu0 architecture.
Copy it as <a class="reference internal" href="#install-f13"><em>Create llvm/3.1.test with cpu0 modified code</em></a> to replace the original 3.1 source code for cpu0
backend support.
After <a class="reference internal" href="#install-f13"><em>Create llvm/3.1.test with cpu0 modified code</em></a>, copy cpu0 example code from LLVMBackendTutorial/1/Cpu0
to src/lib/Target/ as <a class="reference internal" href="#install-f14"><em>Copy cpu0 example code from 1/Cpu0 to src/lib/Target/</em></a>.</p>
<div class="figure align-center" id="install-f14">
<img alt="_images/14.png" src="_images/14.png" />
<p class="caption">Figure 14: Copy cpu0 example code from 1/Cpu0 to src/lib/Target/</p>
</div>
<p>Please remove src/tools/clang since it will waste time to build clang for our
working Cpu0 changes.
Now, it&#8217;s ready for building 1/Cpu0 code by command
<tt class="docutils literal"><span class="pre">cmake</span> <span class="pre">-DCMAKE_CXX_COMPILER=clang++</span> <span class="pre">-DCMAKE_C_COMPILER=clang</span> <span class="pre">-DCMAKE_BUILD_TYPE</span>
<span class="pre">=Debug</span> <span class="pre">-G</span> <span class="pre">&quot;Xcode&quot;</span> <span class="pre">../src/</span></tt> as <a class="reference internal" href="#install-f15"><em>Build llvm debug cpu0 working project by cmake terminal command</em></a>.
Remind, currently, the <tt class="docutils literal"><span class="pre">cmake</span></tt> terminal command can work with lldb debug, but
the <a class="reference external" href="http://jonathan2251.github.com/lbd/install.html#create-llvm-xcodeproj-by-cmake-graphic-ui">section Create LLVM.xcodeproj by cmake Graphic UI</a> cannot.</p>
<div class="figure align-center" id="install-f15">
<a class="reference internal image-reference" href="_images/15.png"><img alt="_images/15.png" src="_images/15.png" style="width: 990.9px; height: 486.0px;" /></a>
<p class="caption">Figure 15: Build llvm debug cpu0 working project by <tt class="docutils literal"><span class="pre">cmake</span></tt> terminal command</p>
</div>
<p>Since Xcode use clang compiler and lldb instead of gcc and gdb, we can run lldb
debug as <a class="reference internal" href="#install-f16"><em>Run lldb debug</em></a>.
About the lldb debug command, please reference
<a class="reference external" href="http://lldb.llvm.org/lldb-gdb.html">http://lldb.llvm.org/lldb-gdb.html</a> or lldb portal <a class="reference external" href="http://lldb.llvm.org/">http://lldb.llvm.org/</a>.</p>
<div class="figure align-center" id="install-f16">
<a class="reference internal image-reference" href="_images/16.png"><img alt="_images/16.png" src="_images/16.png" style="width: 988.2px; height: 407.7px;" /></a>
<p class="caption">Figure 16: Run lldb debug</p>
</div>
</div>
<div class="section" id="install-other-tools-on-imac">
<h3>Install other tools on iMac<a class="headerlink" href="#install-other-tools-on-imac" title="Permalink to this headline">¶</a></h3>
<p>These tools mentioned in this section is for coding and debug.
You can work even without these tools.
Files compare tools Kdiff3 <a class="reference external" href="http://kdiff3.sourceforge.net">http://kdiff3.sourceforge.net</a>.
FileMerge is a part of Xcode, you can type FileMerge in Finder – Applications
as <a class="reference internal" href="#install-f17"><em>Type FileMerge in Finder – Applications</em></a> and drag it into the Dock as <a class="reference internal" href="#install-f18"><em>Drag FileMege into the Dock</em></a>.</p>
<div class="figure align-center" id="install-f17">
<img alt="../Fig/install/17.png" src="../Fig/install/17.png" />
<p class="caption">Figure 17: Type FileMerge in Finder – Applications</p>
</div>
<div class="figure align-center" id="install-f18">
<img alt="../Fig/install/18.png" src="../Fig/install/18.png" />
<p class="caption">Figure 18: Drag FileMege into the Dock</p>
</div>
<p>Download tool Graphviz for display llvm IR nodes in debugging,
<a class="reference external" href="http://www.graphviz.org/Download_macos.php">http://www.graphviz.org/Download_macos.php</a>.
We choose mountainlion as <a class="reference internal" href="#install-f19"><em>Download graphviz for llvm IR node display</em></a> since our iMac is Mountain Lion.</p>
<div class="figure align-center" id="install-f19">
<a class="reference internal image-reference" href="../Fig/install/19.png"><img alt="../Fig/install/19.png" src="../Fig/install/19.png" style="width: 944.8px; height: 590.4px;" /></a>
<p class="caption">Figure 19: Download graphviz for llvm IR node display</p>
</div>
<p>After install Graphviz, please set the path to .profile.
For example, we install the Graphviz in directory
/Applications/Graphviz.app/Contents/MacOS/, so add this path to
/User/Jonathan/.profile as follows,</p>
<div class="highlight-bash"><div class="highlight"><pre>118-165-12-177:InputFiles Jonathan<span class="nv">$ </span>cat /Users/Jonathan/.profile
<span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:/Applications/Xcode.app/Contents/Developer/usr/bin:
/Applications/Graphviz.app/Contents/MacOS/:/Users/Jonathan/llvm/3.1/
cmake_debug_build/bin/Debug
</pre></div>
</div>
<p>The Graphviz information for llvm is in
the section &#8220;SelectionDAG Instruction Selection Process&#8221; of
<a class="reference external" href="http://llvm.org/docs/CodeGenerator.html">http://llvm.org/docs/CodeGenerator.html</a> and
the section &#8220;Viewing graphs while debugging code&#8221; of
<a class="reference external" href="http://llvm.org/docs/ProgrammersManual.html">http://llvm.org/docs/ProgrammersManual.html</a>.
TextWrangler is for edit file with line number display and dump binary file
like the obj file, *.o, that will be generated in chapter of Other
instructions.
You can download from App Store.
To dump binary file, first, open the binary file, next, select menu
“File – Hex Front Document” as <a class="reference internal" href="#install-f20"><em>Select Hex Dump menu</em></a>.
Then select “Front document&#8217;s file” as <a class="reference internal" href="#install-f21"><em>Select Front document&#8217;s file in TextWrangler</em></a>.</p>
<div class="figure align-center" id="install-f20">
<img alt="../Fig/install/20.png" src="../Fig/install/20.png" />
<p class="caption">Figure 20: Select Hex Dump menu</p>
</div>
<div class="figure align-center" id="install-f21">
<img alt="../Fig/install/21.png" src="../Fig/install/21.png" />
<p class="caption">Figure 21: Select Front document&#8217;s file in TextWrangler</p>
</div>
</div>
</div>
<div class="section" id="setting-up-your-linux-machine">
<h2>Setting Up Your Linux Machine<a class="headerlink" href="#setting-up-your-linux-machine" title="Permalink to this headline">¶</a></h2>
<div class="section" id="install-llvm-3-1-release-build-on-linux">
<h3>Install LLVM 3.1 release build on Linux<a class="headerlink" href="#install-llvm-3-1-release-build-on-linux" title="Permalink to this headline">¶</a></h3>
<p>First, install the llvm release build by,</p>
<blockquote>
<div><ol class="arabic simple">
<li>Untar llvm source, rename llvm source with src.</li>
<li>Untar clang and move it src/tools/clang.</li>
<li>Untar compiler-rt and move it to src/project/compiler-rt as <a class="reference internal" href="#install-f22"><em>Create llvm release build</em></a>.</li>
</ol>
</div></blockquote>
<div class="figure align-center" id="install-f22">
<img alt="../Fig/install/22.png" src="../Fig/install/22.png" />
<p class="caption">Figure 22: Create llvm release build</p>
</div>
<p>Next, build with cmake command,
<tt class="docutils literal"><span class="pre">cmake</span> <span class="pre">-DCMAKE_BUILD_TYPE=Release</span> <span class="pre">-DCLANG_BUILD_EXAMPLES=ON</span> <span class="pre">-DLLVM_BUILD_EXAMPL</span>
<span class="pre">ES=ON</span> <span class="pre">-G</span> <span class="pre">&quot;Unix</span> <span class="pre">Makefiles&quot;</span> <span class="pre">../src/</span></tt>,
shown in <a class="reference internal" href="#install-f23"><em>Create llvm 3.1 release build</em></a>.</p>
<div class="figure align-center" id="install-f23">
<img alt="../Fig/install/23.png" src="../Fig/install/23.png" />
<p class="caption">Figure 23: Create llvm 3.1 release build</p>
</div>
<p>After cmake, run command <tt class="docutils literal"><span class="pre">make</span></tt>, then you can get clang, llc, llvm-as, ...,
in
cmake_release_build/bin/ after a few tens minutes of build. Next, edit
/home/Gamma/.bash_profile with adding /usr/local/llvm/3.1/cmake_release_build/
bin to PATH
to enable the clang, llc, ..., command search path, as shown in <a class="reference internal" href="#install-f24"><em>Setup llvm command path</em></a>.</p>
<div class="figure align-center" id="install-f24">
<img alt="../Fig/install/24.png" src="../Fig/install/24.png" />
<p class="caption">Figure 24: Setup llvm command path</p>
</div>
</div>
<div class="section" id="install-cpu0-debug-build-on-linux">
<h3>Install cpu0 debug build on Linux<a class="headerlink" href="#install-cpu0-debug-build-on-linux" title="Permalink to this headline">¶</a></h3>
<p>Make another copy /usr/local/llvm/3.1.test/cpu0/1/src for cpu0 debug working
project
according the following list steps, the corresponding commands shown in
<a class="reference internal" href="#install-f25"><em>Create llvm 3.1 debug copy</em></a>:</p>
<p>1) Enter /usr/local/llvm/3.1.test/cpu0/1 and
<tt class="docutils literal"><span class="pre">cp</span> <span class="pre">-rf</span> <span class="pre">/usr/local/llvm/3.1/src</span> <span class="pre">.</span></tt>.</p>
<p>2) Update my modified files to support cpu0 by command,
<tt class="docutils literal"><span class="pre">cp</span> <span class="pre">-rf</span> <span class="pre">/home/Gamma/Gamma_flash/LLVMBackendTutorial/src_files_modify/src</span> <span class="pre">.</span></tt>.</p>
<p>3) Enter src/lib/Target and copy example code LLVMBackendTutorial/1/Cpu0 to the
directory by command <tt class="docutils literal"><span class="pre">cd</span> <span class="pre">src/lib/Target/</span></tt> and
<tt class="docutils literal"><span class="pre">cp</span> <span class="pre">-rf</span> <span class="pre">/home/Gamma/Gamma_flash/LLVMBackendTutorial/1/Cpu0</span> <span class="pre">.</span></tt>.</p>
<p>4) Go into directory 3.1.test/cpu0/1/src and Check step 3 is effect by command
<tt class="docutils literal"><span class="pre">grep</span> <span class="pre">-R</span> <span class="pre">&quot;Cpu0&quot;</span> <span class="pre">.</span> <span class="pre">|</span> <span class="pre">more`</span></tt>. I add the Cpu0 backend support, so check with
grep.</p>
<p>5) Remove clang from 3.1.test/cpu0/1/src/tools/clang, and mkdir
3.1.test/cpu0/1/cmake_debug_build. Without this you will waste extra time for
command
<tt class="docutils literal"><span class="pre">make</span></tt> in cpu0 example code build.</p>
<div class="figure align-center" id="install-f25">
<a class="reference internal image-reference" href="../Fig/install/25.png"><img alt="../Fig/install/25.png" src="../Fig/install/25.png" style="width: 840.0px; height: 761.6px;" /></a>
<p class="caption">Figure 25: Create llvm 3.1 debug copy</p>
</div>
<p>Now, go into directory 3.1.test/cpu0/1, create directory cmake_debug_build and
do cmake
like build the 3.1 release, but we do Debug build and use clang as our compiler
instead,
as follows,</p>
<p>Then do make as follows,</p>
<p>Now, we are ready for the cpu0 backend development. We can run gdb debug as
follows.
If your setting has anything about gdb errors, please follow the errors indication
(maybe need to download gdb again).
Finally, try gdb as <a class="reference internal" href="#install-f26"><em>Debug llvm cpu0 backend by gdb</em></a>.</p>
<div class="figure align-center" id="install-f26">
<img alt="../Fig/install/26.png" src="../Fig/install/26.png" />
<p class="caption">Figure 26: Debug llvm cpu0 backend by gdb</p>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Appendix</a><ul>
<li><a class="reference internal" href="#setting-up-your-mac">Setting Up Your Mac</a><ul>
<li><a class="reference internal" href="#installing-llvm-xcode-and-cmake">Installing LLVM, Xcode and cmake</a></li>
<li><a class="reference internal" href="#create-llvm-xcodeproj-by-cmake-graphic-ui">Create LLVM.xcodeproj by cmake Graphic UI</a></li>
<li><a class="reference internal" href="#build-llvm-by-xcode">Build llvm by Xcode</a></li>
<li><a class="reference internal" href="#create-llvm-xcodeproj-of-supporting-cpu0-by-terminal-cmake-command">Create LLVM.xcodeproj of supporting cpu0 by terminal cmake command</a></li>
<li><a class="reference internal" href="#install-other-tools-on-imac">Install other tools on iMac</a></li>
</ul>
</li>
<li><a class="reference internal" href="#setting-up-your-linux-machine">Setting Up Your Linux Machine</a><ul>
<li><a class="reference internal" href="#install-llvm-3-1-release-build-on-linux">Install LLVM 3.1 release build on Linux</a></li>
<li><a class="reference internal" href="#install-cpu0-debug-build-on-linux">Install cpu0 debug build on Linux</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="elf.html"
                        title="previous chapter">ELF</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="todo.html"
                        title="next chapter">Todo List</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/appendix.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="todo.html" title="Todo List"
             >next</a> |</li>
        <li class="right" >
          <a href="elf.html" title="ELF"
             >previous</a> |</li>
        <li><a href="index.html">Write An LLVM Backend Tutorial For Cpu0</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, LLVM.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>